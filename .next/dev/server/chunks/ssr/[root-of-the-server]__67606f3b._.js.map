{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabase/client';\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    // 1️⃣ Login\r\n    const { data, error: authError } =\r\n      await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n      });\r\n\r\n    if (authError || !data.user) {\r\n      setError(authError?.message || 'Login failed');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    console.log('AUTH USER ID:', data.user.id);\r\n\r\n    // 2️⃣ Fetch profile SAFELY\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from('profiles')\r\n      .select('role')\r\n      .eq('user', data.user.id)\r\n      .maybeSingle();\r\n\r\n    console.log('PROFILE:', profile);\r\n    console.log('PROFILE ERROR:', profileError);\r\n\r\n    if (profileError) {\r\n      setError(profileError.message);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!profile?.role) {\r\n      setError(\r\n        'User profile exists but role is not readable (RLS or ID mismatch)'\r\n      );\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // 3️⃣ Redirect by role\r\n    if (profile.role === 'manager') {\r\n      router.push('/manager/dashboard');\r\n    } else if (profile.role === 'client') {\r\n      router.push('/client/dashboard');\r\n    } else {\r\n      setError('Invalid role value');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-200 px-4\">\r\n      <div className=\"w-full max-w-md bg-white rounded-xl shadow-lg border border-gray-200\">\r\n        <div className=\"p-8\">\r\n          <h1 className=\"text-2xl font-semibold text-gray-900 text-center\">\r\n            Sign in to your account\r\n          </h1>\r\n          <p className=\"text-sm text-gray-500 text-center mt-2\">\r\n            Enter your credentials to continue\r\n          </p>\r\n\r\n          {error && (\r\n            <div className=\"mt-4 rounded-md bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleLogin} className=\"mt-6 space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black\"\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full rounded-md bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-900 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Signing in…' : 'Sign In'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,YAAY;QACZ,MAAM,EAAE,IAAI,EAAE,OAAO,SAAS,EAAE,GAC9B,MAAM,4IAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YACrC;YACA;QACF;QAEF,IAAI,aAAa,CAAC,KAAK,IAAI,EAAE;YAC3B,SAAS,WAAW,WAAW;YAC/B,WAAW;YACX;QACF;QAEA,QAAQ,GAAG,CAAC,iBAAiB,KAAK,IAAI,CAAC,EAAE;QAEzC,2BAA2B;QAC3B,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,4IAAQ,CAC1D,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,EAAE,EACvB,WAAW;QAEd,QAAQ,GAAG,CAAC,YAAY;QACxB,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,IAAI,cAAc;YAChB,SAAS,aAAa,OAAO;YAC7B,WAAW;YACX;QACF;QAEA,IAAI,CAAC,SAAS,MAAM;YAClB,SACE;YAEF,WAAW;YACX;QACF;QAEA,uBAAuB;QACvB,IAAI,QAAQ,IAAI,KAAK,WAAW;YAC9B,OAAO,IAAI,CAAC;QACd,OAAO,IAAI,QAAQ,IAAI,KAAK,UAAU;YACpC,OAAO,IAAI,CAAC;QACd,OAAO;YACL,SAAS;QACX;QAEA,WAAW;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmD;;;;;;kCAGjE,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;oBAIrD,uBACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;kCAIL,8OAAC;wBAAK,UAAU;wBAAa,WAAU;;0CACrC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCACC,MAAK;wCACL,QAAQ;wCACR,OAAO;wCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wCACxC,WAAU;;;;;;;;;;;;0CAId,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCACC,MAAK;wCACL,QAAQ;wCACR,OAAO;wCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wCAC3C,WAAU;;;;;;;;;;;;0CAId,8OAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzC"}}]
}
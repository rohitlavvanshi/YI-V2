{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,8LAAY"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/app/manager/clients/new/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabase/client';\r\n\r\nexport default function AddClientPage() {\r\n  const router = useRouter();\r\n  const [companyName, setCompanyName] = useState('');\r\n  const [fullName, setFullName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // 1️⃣ Create auth user (ADMIN ACTION)\r\n      const { data: authUser, error: authError } =\r\n        await supabase.auth.admin.createUser({\r\n          email,\r\n          password,\r\n          email_confirm: true,\r\n        });\r\n\r\n      if (authError || !authUser.user) {\r\n        throw new Error(authError?.message || 'Failed to create user');\r\n      }\r\n\r\n      const userId = authUser.user.id;\r\n\r\n      // 2️⃣ Insert profile\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .insert({\r\n          user: userId,\r\n          role: 'client',\r\n          full_name: fullName,\r\n        });\r\n\r\n      if (profileError) throw profileError;\r\n\r\n      // 3️⃣ Insert company (NO industry as requested)\r\n      const { error: companyError } = await supabase\r\n        .from('companies')\r\n        .insert({\r\n          company_name: companyName,\r\n          user: userId,\r\n        });\r\n\r\n      if (companyError) throw companyError;\r\n\r\n      router.push('/manager/dashboard');\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 p-8 flex justify-center\">\r\n      <div className=\"w-full max-w-lg bg-white rounded-lg shadow border p-6\">\r\n        <h1 className=\"text-xl font-semibold mb-4\">Add Client</h1>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 text-sm text-red-600\">{error}</div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <input\r\n            required\r\n            placeholder=\"Client Full Name\"\r\n            value={fullName}\r\n            onChange={(e) => setFullName(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <input\r\n            required\r\n            placeholder=\"Company Name\"\r\n            value={companyName}\r\n            onChange={(e) => setCompanyName(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <input\r\n            type=\"email\"\r\n            required\r\n            placeholder=\"Client Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <input\r\n            type=\"password\"\r\n            required\r\n            placeholder=\"Temporary Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <button\r\n            disabled={loading}\r\n            className=\"bg-black text-yellow-400 px-4 py-2 rounded hover:opacity-90\"\r\n          >\r\n            {loading ? 'Creating...' : 'Create Client'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,IAAI;YACF,sCAAsC;YACtC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,GACxC,MAAM,4IAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;gBACnC;gBACA;gBACA,eAAe;YACjB;YAEF,IAAI,aAAa,CAAC,SAAS,IAAI,EAAE;gBAC/B,MAAM,IAAI,MAAM,WAAW,WAAW;YACxC;YAEA,MAAM,SAAS,SAAS,IAAI,CAAC,EAAE;YAE/B,qBAAqB;YACrB,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,4IAAQ,CAC3C,IAAI,CAAC,YACL,MAAM,CAAC;gBACN,MAAM;gBACN,MAAM;gBACN,WAAW;YACb;YAEF,IAAI,cAAc,MAAM;YAExB,gDAAgD;YAChD,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,4IAAQ,CAC3C,IAAI,CAAC,aACL,MAAM,CAAC;gBACN,cAAc;gBACd,MAAM;YACR;YAEF,IAAI,cAAc,MAAM;YAExB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO;QACtB;QAEA,WAAW;IACb;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA6B;;;;;;gBAE1C,uBACC,8OAAC;oBAAI,WAAU;8BAA6B;;;;;;8BAG9C,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC;4BACC,QAAQ;4BACR,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,WAAU;;;;;;sCAGZ,8OAAC;4BACC,QAAQ;4BACR,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC9C,WAAU;;;;;;sCAGZ,8OAAC;4BACC,MAAK;4BACL,QAAQ;4BACR,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,WAAU;;;;;;sCAGZ,8OAAC;4BACC,MAAK;4BACL,QAAQ;4BACR,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,WAAU;;;;;;sCAGZ,8OAAC;4BACC,UAAU;4BACV,WAAU;sCAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAMvC"}}]
}
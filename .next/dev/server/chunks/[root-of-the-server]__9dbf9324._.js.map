{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/lib/supabase/admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nexport const supabaseAdmin = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,gBAAgB,IAAA,gMAAY,gFAEvC,QAAQ,GAAG,CAAC,yBAAyB"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/app/api/manager/companies/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { supabaseAdmin } from '@/lib/supabase/admin';\r\n\r\nexport async function GET() {\r\n  try {\r\n    // 1️⃣ Get all client profiles\r\n    const { data: profiles, error: profileError } =\r\n      await supabaseAdmin\r\n        .from('profiles')\r\n        .select('user, full_name')\r\n        .eq('role', 'client');\r\n\r\n    if (profileError) {\r\n      return NextResponse.json(\r\n        { error: profileError.message },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    const userIds = profiles.map((p) => p.user);\r\n\r\n    // 2️⃣ Get companies for those users\r\n    const { data: companies, error: companyError } =\r\n      await supabaseAdmin\r\n        .from('companies')\r\n        .select('id, company_name, created_at, user')\r\n        .in('user', userIds)\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (companyError) {\r\n      return NextResponse.json(\r\n        { error: companyError.message },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // 3️⃣ Map user → full name\r\n    const nameMap: Record<string, string> = {};\r\n    profiles.forEach((p) => {\r\n      nameMap[p.user] = p.full_name ?? '—';\r\n    });\r\n\r\n    return NextResponse.json({\r\n      companies,\r\n      profiles: nameMap,\r\n    });\r\n  } catch (err: any) {\r\n    return NextResponse.json(\r\n      { error: err.message || 'Server error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,8BAA8B;QAC9B,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,YAAY,EAAE,GAC3C,MAAM,kJAAa,CAChB,IAAI,CAAC,YACL,MAAM,CAAC,mBACP,EAAE,CAAC,QAAQ;QAEhB,IAAI,cAAc;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,aAAa,OAAO;YAAC,GAC9B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,SAAS,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;QAE1C,oCAAoC;QACpC,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,YAAY,EAAE,GAC5C,MAAM,kJAAa,CAChB,IAAI,CAAC,aACL,MAAM,CAAC,sCACP,EAAE,CAAC,QAAQ,SACX,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE5C,IAAI,cAAc;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,aAAa,OAAO;YAAC,GAC9B;gBAAE,QAAQ;YAAI;QAElB;QAEA,2BAA2B;QAC3B,MAAM,UAAkC,CAAC;QACzC,SAAS,OAAO,CAAC,CAAC;YAChB,OAAO,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,SAAS,IAAI;QACnC;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB;YACA,UAAU;QACZ;IACF,EAAE,OAAO,KAAU;QACjB,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,IAAI,OAAO,IAAI;QAAe,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}
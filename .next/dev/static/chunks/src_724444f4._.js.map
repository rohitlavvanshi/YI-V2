{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["C:/Users/DELL/Desktop/Rohit Workspace/Product- YI/supabase-saas/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabase/client';\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    // 1️⃣ Login\r\n    const { data, error: authError } =\r\n      await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n      });\r\n\r\n    if (authError || !data.user) {\r\n      setError(authError?.message || 'Login failed');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    console.log('AUTH USER ID:', data.user.id);\r\n\r\n    // 2️⃣ Fetch profile SAFELY\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from('profiles')\r\n      .select('role')\r\n      .eq('user', data.user.id)\r\n      .maybeSingle();\r\n\r\n    console.log('PROFILE:', profile);\r\n    console.log('PROFILE ERROR:', profileError);\r\n\r\n    if (profileError) {\r\n      setError(profileError.message);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!profile?.role) {\r\n      setError(\r\n        'User profile exists but role is not readable (RLS or ID mismatch)'\r\n      );\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // 3️⃣ Redirect by role\r\n    if (profile.role === 'manager') {\r\n      router.push('/manager/dashboard');\r\n    } else if (profile.role === 'client') {\r\n      router.push('/client/dashboard');\r\n    } else {\r\n      setError('Invalid role value');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-200 px-4\">\r\n      <div className=\"w-full max-w-md bg-white rounded-xl shadow-lg border border-gray-200\">\r\n        <div className=\"p-8\">\r\n          <h1 className=\"text-2xl font-semibold text-gray-900 text-center\">\r\n            Sign in to your account\r\n          </h1>\r\n          <p className=\"text-sm text-gray-500 text-center mt-2\">\r\n            Enter your credentials to continue\r\n          </p>\r\n\r\n          {error && (\r\n            <div className=\"mt-4 rounded-md bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleLogin} className=\"mt-6 space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-black\"\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full rounded-md bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-900 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Signing in…' : 'Sign In'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["c","_c","useState","useRouter","supabase","LoginPage","$","$i","Symbol","for","router","email","setEmail","password","setPassword","loading","setLoading","error","setError","t0","e","preventDefault","data","authError","auth","signInWithPassword","user","message","console","log","id","profile","profileError","from","select","eq","maybeSingle","role","push","handleLogin","t1","t2","t3","t4","t5","e_0","target","value","t6","t7","t8","e_1","t9","t10","t11","t12","t13"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,QAAQ,QAAQ,uBAAuB;;;AAJhD,YAAY;;;;;AAMG;;IAAA,MAAAE,CAAA,OAAAL,gLAAA,EAAA;IAAA,IAAAK,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACb,MAAAI,MAAA;IACA,MAAA,CAAAC,KAAA,EAAAC,QAAA,CAAA,GAA0BV,6KAAQ,EAAC,EAAE,CAAC;IACtC,MAAA,CAAAW,QAAA,EAAAC,WAAA,CAAA,OAAgCZ,yKAAQ,EAAC,EAAE,CAAC;IAC5C,MAAA,CAAAa,OAAA,EAAAC,UAAA,CAAA,OAA8Bd,yKAAQ,EAAC,KAAK,CAAC;IAC7C,MAAA,CAAAe,KAAA,EAAAC,QAAA,CAAA,OAA0BhB,yKAAQ,EAAgB,IAAI,CAAC;IAAC,IAAAiB,EAAA;IAAA,IAAAb,CAAA,CAAA,EAAA,KAAAK,KAAA,IAAAL,CAAA,CAAA,EAAA,KAAAO,QAAA,IAAAP,CAAA,CAAA,EAAA,KAAAI,MAAA,EAAA;QAEpCS,EAAA,GAAA,CAAA;YAAA,0BAAA,OAAAC,CAAA;gBAClBA,CAAC,CAAAC,cAAe,CAAC,CAAC;gBAClBL,UAAU,CAAC,IAAI,CAAC;gBAChBE,QAAQ,CAAC,IAAI,CAAC;gBAGd,MAAA,EAAAI,IAAA,EAAAL,KAAA,EAAAM,SAAAA,EAAA,GACE,MAAMnB,+IAAQ,CAAAoB,IAAK,CAAAC,kBAAmB,CAAC;oBAAAd,KAAA;oBAAAE;gBAGvC,CAAC,CAAC;gBAEJ,IAAIU,SAAuB,IAAvB,CAAcD,IAAI,CAAAI,IAAK,EAAA;oBACzBR,QAAQ,CAACK,SAAS,EAAAI,OAA2B,IAApC,cAAoC,CAAC;oBAC9CX,UAAU,CAAC,KAAK,CAAC;oBAAA;gBAAA;gBAInBY,OAAO,CAAAC,GAAI,CAAC,eAAe,EAAEP,IAAI,CAAAI,IAAK,CAAAI,EAAG,CAAC;gBAG1C,MAAA,EAAAR,IAAA,EAAAS,OAAA,EAAAd,KAAA,EAAAe,YAAAA,EAAA,GAA+C,MAAM5B,+IAAQ,CAAA6B,IACtD,CAAC,UAAU,CAAC,CAAAC,MACV,CAAC,MAAM,CAAC,CAAAC,EACZ,CAAC,MAAM,EAAEb,IAAI,CAAAI,IAAK,CAAAI,EAAG,CAAC,CAAAM,WACb,CAAC,CAAC;gBAEhBR,OAAO,CAAAC,GAAI,CAAC,UAAU,EAAEE,OAAO,CAAC;gBAChCH,OAAO,CAAAC,GAAI,CAAC,gBAAgB,EAAEG,YAAY,CAAC;gBAE3C,IAAIA,YAAY,EAAA;oBACdd,QAAQ,CAACc,YAAY,CAAAL,OAAQ,CAAC;oBAC9BX,UAAU,CAAC,KAAK,CAAC;oBAAA;gBAAA;gBAInB,IAAI,CAACe,OAAO,EAAAM,IAAM,EAAA;oBAChBnB,QAAQ,CACN,mEACF,CAAC;oBACDF,UAAU,CAAC,KAAK,CAAC;oBAAA;gBAAA;gBAKnB,IAAIe,OAAO,CAAAM,IAAK,KAAK,SAAS,EAAA;oBAC5B3B,MAAM,CAAA4B,IAAK,CAAC,oBAAoB,CAAC;gBAAA,OAAA;oBAC5B,IAAIP,OAAO,CAAAM,IAAK,KAAK,QAAQ,EAAA;wBAClC3B,MAAM,CAAA4B,IAAK,CAAC,mBAAmB,CAAC;oBAAA,OAAA;wBAEhCpB,QAAQ,CAAC,oBAAoB,CAAC;oBAAA;gBAC/B;gBAEDF,UAAU,CAAC,KAAK,CAAC;YAAA;SAAA,CAAA,CAAA,yBAClB;QAAAV,CAAA,CAAA,EAAA,GAAAK,KAAA;QAAAL,CAAA,CAAA,EAAA,GAAAO,QAAA;QAAAP,CAAA,CAAA,EAAA,GAAAI,MAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAa,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAb,CAAA,CAAA,EAAA;IAAA;IAtDD,MAAAiC,WAAA,GAAoBpB,EAsDnB;IAAC,IAAAqB,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAnC,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAMM+B,EAAA,iBAAA,6LAAA,EAEK;YAFS,SAAkD,EAAlD,kDAAkD;sBAAC,uBAEjE,EAFA,EAEK;;;;;;QACLC,EAAA,iBAAA,6LAAA,CAEI;YAFS,SAAwC,EAAxC,wCAAwC;sBAAC,kCAEtD,EAFA,CAEI;;;;;;QAAAnC,CAAA,CAAA,EAAA,GAAAkC,EAAA;QAAAlC,CAAA,CAAA,EAAA,GAAAmC,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAlC,CAAA,CAAA,EAAA;QAAAmC,EAAA,GAAAnC,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAoC,EAAA;IAAA,IAAApC,CAAA,CAAA,EAAA,KAAAW,KAAA,EAAA;QAEHyB,EAAA,GAAAzB,KAIA,kBAHC,6LAAA,GAEM;YAFS,SAAgF,EAAhF,gFAAgF,CAC5FA;sBAAAA,KAAI,CACP,EAFA,GAEM,CACP;;;;;;QAAAX,CAAA,CAAA,EAAA,GAAAW,KAAA;QAAAX,CAAA,CAAA,EAAA,GAAAoC,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAApC,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAqC,EAAA;IAAA,IAAArC,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAIGkC,EAAA,iBAAA,6LAAA,KAEQ;YAFS,SAA8C,EAA9C,8CAA8C;sBAAC,aAEhE,EAFA,KAEQ;;;;;;QAAArC,CAAA,CAAA,EAAA,GAAAqC,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAArC,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAsC,EAAA;IAAA,IAAAtC,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAKImC,EAAA,GAAA,CAAA;YAAA,gCAAAC,GAAA,GAAOjC,QAAQ,CAACQ,GAAC,CAAA0B,MAAO,CAAAC,KAAM;SAAC,CAAA,CAAA,8BAAA;QAAAzC,CAAA,CAAA,GAAA,GAAAsC,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAtC,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA0C,EAAA;IAAA,IAAA1C,CAAA,CAAA,GAAA,KAAAK,KAAA,EAAA;QAR7CqC,EAAA,iBAAA,6LAAA,GAWM,CAVJ;;gBAAAL,EAEO;8BACP,6LAAA,KAME;oBALK,IAAO,EAAP,OAAO;oBACZ,QAAQ,CAAR,CAAA,IAAO,CAAC;oBACDhC,KAAK,CAALA,CAAAA,KAAI,CAAC;oBACF,QAA+B,CAA/B,CAAAiC,EAA8B,CAAC;oBAC/B,SAA6G,EAA7G,6GAA6G,GAE3H,EAXA,GAWM;;;;;;;;;;;;QAAAtC,CAAA,CAAA,GAAA,GAAAK,KAAA;QAAAL,CAAA,CAAA,GAAA,GAAA0C,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA1C,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA2C,EAAA;IAAA,IAAA3C,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAGJwC,EAAA,iBAAA,6LAAA,KAEQ;YAFS,SAA8C,EAA9C,8CAA8C;sBAAC,QAEhE,EAFA,KAEQ;;;;;;QAAA3C,CAAA,CAAA,GAAA,GAAA2C,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA3C,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA4C,EAAA;IAAA,IAAA5C,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAKIyC,EAAA,GAAA,CAAA;YAAA,+BAAAC,GAAA,IAAOrC,WAAW,CAACM,GAAC,CAAA0B,MAAO,CAAAC,KAAM;SAAC,CAAA,CAAA,8BAAA;QAAAzC,CAAA,CAAA,GAAA,GAAA4C,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA5C,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA8C,EAAA;IAAA,IAAA9C,CAAA,CAAA,GAAA,KAAAO,QAAA,EAAA;QARhDuC,EAAA,iBAAA,6LAAA,GAWM,CAVJ;;gBAAAH,EAEO;8BACP,6LAAA,KAME;oBALK,IAAU,EAAV,UAAU;oBACf,QAAQ,CAAR,CAAA,IAAO,CAAC;oBACDpC,KAAQ,CAARA,CAAAA,QAAO,CAAC;oBACL,QAAkC,CAAlC,CAAAqC,EAAiC,CAAC;oBAClC,SAA6G,EAA7G,6GAA6G,GAE3H,EAXA,GAWM;;;;;;;;;;;;QAAA5C,CAAA,CAAA,GAAA,GAAAO,QAAA;QAAAP,CAAA,CAAA,GAAA,GAAA8C,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA9C,CAAA,CAAA,GAAA;IAAA;IAOH,MAAA+C,GAAA,GAAAtC,OAAO,GAAP,kBAAmC,GAAnC,SAAmC;IAAA,IAAAuC,GAAA;IAAA,IAAAhD,CAAA,CAAA,GAAA,KAAAS,OAAA,IAAAT,CAAA,CAAA,GAAA,KAAA+C,GAAA,EAAA;QALtCC,GAAA,iBAAA,6LAAA,MAMS;YALF,IAAQ,EAAR,QAAQ;YACHvC,QAAO,CAAPA,CAAAA,OAAM,CAAC;YACP,SAA2G,EAA3G,2GAA2G,CAEpH;sBAAAsC,GAAkC,CACrC,EANA,MAMS;;;;;;QAAA/C,CAAA,CAAA,GAAA,GAAAS,OAAA;QAAAT,CAAA,CAAA,GAAA,GAAA+C,GAAA;QAAA/C,CAAA,CAAA,GAAA,GAAAgD,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAAhD,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAiD,GAAA;IAAA,IAAAjD,CAAA,CAAA,GAAA,KAAAiC,WAAA,IAAAjC,CAAA,CAAA,GAAA,KAAAgD,GAAA,IAAAhD,CAAA,CAAA,GAAA,KAAA0C,EAAA,IAAA1C,CAAA,CAAA,GAAA,KAAA8C,EAAA,EAAA;QAjCXG,GAAA,iBAAA,6LAAA,IAkCO;YAlCShB,QAAW,CAAXA,CAAAA,WAAU,CAAC;YAAY,SAAgB,EAAhB,gBAAgB,CACrD;;gBAAAS,EAWK,CAEL;gBAAAI,EAWK,CAEL;gBAAAE,GAMQ,CACV,EAlCA,IAkCO;;;;;;;QAAAhD,CAAA,CAAA,GAAA,GAAAiC,WAAA;QAAAjC,CAAA,CAAA,GAAA,GAAAgD,GAAA;QAAAhD,CAAA,CAAA,GAAA,GAAA0C,EAAA;QAAA1C,CAAA,CAAA,GAAA,GAAA8C,EAAA;QAAA9C,CAAA,CAAA,GAAA,GAAAiD,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAAjD,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAkD,GAAA;IAAA,IAAAlD,CAAA,CAAA,GAAA,KAAAiD,GAAA,IAAAjD,CAAA,CAAA,GAAA,KAAAoC,EAAA,EAAA;QAlDbc,GAAA,iBAAA,6LAAA,GAqDM;YArDS,SAA+F,EAA/F,+FAA+F;oCAC5G,6LAAA,GAmDM;gBAnDS,SAAsE,EAAtE,sEAAsE;wCACnF,6LAAA,GAiDM;oBAjDS,SAAK,EAAL,KAAK,CAClB;;wBAAAhB,EAEI,CACJ;wBAAAC,EAEG,CAEF;wBAAAC,EAID,CAEA;wBAAAa,GAkCM,CACR,EAjDA,GAiDM,CACR,EAnDA,GAmDM,CACR,EArDA,GAqDM;;;;;;;;;;;;;;;;;QAAAjD,CAAA,CAAA,GAAA,GAAAiD,GAAA;QAAAjD,CAAA,CAAA,GAAA,GAAAoC,EAAA;QAAApC,CAAA,CAAA,GAAA,GAAAkD,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAAlD,CAAA,CAAA,GAAA;IAAA;IAAA,OArDNkD,GAqDM;AAAA;;;QApHOrD,kJAAS,CAAC,CAAC;;;KADbE,UAAA","ignoreList":[]}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Rohit%20Workspace/Product-%20YI/supabase-saas/src/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,iMAAY"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["C:/Users/DELL/Desktop/Rohit Workspace/Product- YI/supabase-saas/src/app/manager/clients/new/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabase/client';\r\n\r\nexport default function AddClientPage() {\r\n  const router = useRouter();\r\n  const [companyName, setCompanyName] = useState('');\r\n  const [fullName, setFullName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // 1️⃣ Create auth user (ADMIN ACTION)\r\n      const { data: authUser, error: authError } =\r\n        await supabase.auth.admin.createUser({\r\n          email,\r\n          password,\r\n          email_confirm: true,\r\n        });\r\n\r\n      if (authError || !authUser.user) {\r\n        throw new Error(authError?.message || 'Failed to create user');\r\n      }\r\n\r\n      const userId = authUser.user.id;\r\n\r\n      // 2️⃣ Insert profile\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .insert({\r\n          user: userId,\r\n          role: 'client',\r\n          full_name: fullName,\r\n        });\r\n\r\n      if (profileError) throw profileError;\r\n\r\n      // 3️⃣ Insert company (NO industry as requested)\r\n      const { error: companyError } = await supabase\r\n        .from('companies')\r\n        .insert({\r\n          company_name: companyName,\r\n          user: userId,\r\n        });\r\n\r\n      if (companyError) throw companyError;\r\n\r\n      router.push('/manager/dashboard');\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 p-8 flex justify-center\">\r\n      <div className=\"w-full max-w-lg bg-white rounded-lg shadow border p-6\">\r\n        <h1 className=\"text-xl font-semibold mb-4\">Add Client</h1>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 text-sm text-red-600\">{error}</div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <input\r\n            required\r\n            placeholder=\"Client Full Name\"\r\n            value={fullName}\r\n            onChange={(e) => setFullName(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <input\r\n            required\r\n            placeholder=\"Company Name\"\r\n            value={companyName}\r\n            onChange={(e) => setCompanyName(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <input\r\n            type=\"email\"\r\n            required\r\n            placeholder=\"Client Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <input\r\n            type=\"password\"\r\n            required\r\n            placeholder=\"Temporary Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n          />\r\n\r\n          <button\r\n            disabled={loading}\r\n            className=\"bg-black text-yellow-400 px-4 py-2 rounded hover:opacity-90\"\r\n          >\r\n            {loading ? 'Creating...' : 'Create Client'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useRouter","supabase","AddClientPage","router","companyName","setCompanyName","fullName","setFullName","email","setEmail","password","setPassword","loading","setLoading","error","setError","handleSubmit","e","React","FormEvent","preventDefault","data","authUser","authError","auth","admin","createUser","email_confirm","user","Error","message","userId","id","profileError","from","insert","role","full_name","companyError","company_name","push","err","target","value"],"mappings":"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","ignoreList":[]}}]
}